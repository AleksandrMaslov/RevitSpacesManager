<Window x:Class="RevitSpacesManager.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:RevitSpacesManager.ViewModels" 
        mc:Ignorable="d"
        
        Title="Spaces and Rooms Manager" 
        Height="450" 
        Width="300"
        ResizeMode="NoResize" 
        WindowStartupLocation="CenterScreen">
    
    <Window.DataContext>
        <vm:MainWindowViewModel/>
    </Window.DataContext>
    
    <DockPanel>
        <DockPanel.Resources>
            <Style TargetType="GroupBox">
                <Setter Property="DockPanel.Dock" Value="Top"/>
                <Setter Property="Margin" Value="5"/>
            </Style>

            <Style TargetType="ComboBox">
                <Setter Property="DockPanel.Dock" Value="Top"/>
                <Setter Property="Margin" Value="2"/>
                <Setter Property="IsEditable" Value="True"/>
                <Setter Property="IsReadOnly" Value="True"/>
            </Style>

            <Style TargetType="UniformGrid">
                <Setter Property="DockPanel.Dock" Value="Top"/>
            </Style>

            <Style TargetType="Button">
                <Setter Property="Margin" Value="2"/>
            </Style>

            <DataTemplate x:Key="ComboBoxPhaseTemplate">
                <StackPanel Orientation="Horizontal">
                    <Ellipse Name="selectedMark"
                             Fill="Black" 
                             Width="8" 
                             Height="8"  
                             Visibility="Collapsed"
                             Margin="0,0,5,0"/>
                    <TextBlock Text="{Binding Name}"/>
                </StackPanel>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ComboBoxItem}}" Value="True">
                        <Setter TargetName="selectedMark" Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>

            <DataTemplate x:Key="ComboBoxLinkTemplate">
                <StackPanel Orientation="Horizontal">
                    <Ellipse Name="selectedMark"
                             Fill="Black" 
                             Width="8" 
                             Height="8"  
                             Visibility="Collapsed"
                             Margin="0,0,5,0"/>
                    <TextBlock Text="{Binding Title}"/>
                </StackPanel>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ComboBoxItem}}" Value="True">
                        <Setter TargetName="selectedMark" Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </DockPanel.Resources>
        
        <GroupBox Header="Current Model Spaces/Rooms by Phase">
            <DockPanel>
                <ComboBox Text="- Select Phase -"
                          ItemsSource="{Binding CurrentDocumentPhases}"
                          SelectedItem="{Binding CurrentDocumentPhaseSelected, Mode=TwoWay}"
                          ItemTemplate="{StaticResource ComboBoxPhaseTemplate}"
                          TextSearch.TextPath="Name"
                        />

                <UniformGrid Columns="2">
                    <Button Content="Delete All"/>
                    <Button Content="Delete Selected"/>
                </UniformGrid>
            </DockPanel>
        </GroupBox>

        <GroupBox Header="Linked Model Spaces/Rooms by Phase">
            <DockPanel>
                <ComboBox Text="- Select Link -"
                          ItemsSource="{Binding LinkedDocuments}"
                          SelectedItem="{Binding LinkedDocumentSelected, Mode=TwoWay}"
                          ItemTemplate="{StaticResource ComboBoxLinkTemplate}"
                          TextSearch.TextPath="Title"
                          />
                
                <ComboBox Text="- Select Phase -"
                          ItemsSource="{Binding LinkedDocumentPhases}"
                          SelectedItem="{Binding LinkedDocumentPhaseSelected, Mode=TwoWay}"
                          ItemTemplate="{StaticResource ComboBoxPhaseTemplate}"
                          TextSearch.TextPath="Name"
                          />
                
                <UniformGrid Columns="2">
                    <Button Content="Create All"/>
                    <Button Content="Create Selected"/>
                </UniformGrid>
            </DockPanel>
        </GroupBox>

        <StatusBar Height="20" DockPanel.Dock="Bottom"/>

        <UniformGrid Columns="3"
                     DockPanel.Dock="Bottom">

            <UniformGrid.Resources>
                <Style TargetType="Button">
                    <Setter Property="Margin" Value="10"/>
                </Style>
            </UniformGrid.Resources>
            
            <Button Content="Help"/>
            <StackPanel/>
            <Button Content="Exit"/>
        </UniformGrid>

        <StackPanel/>
    </DockPanel>
</Window>